"use strict";(self.webpackChunkecommerce_client=self.webpackChunkecommerce_client||[]).push([[610],{6610:(a,e,t)=>{t.r(e),t.d(e,{default:()=>d});var s=t(9950),r=t(8429),c=t(2074),i=t(6844),n=t(5530),l=t(4414);const d=()=>{const{cartState:a,dispatch:e,user:t}=(0,i._)(),[d,o]=(0,s.useState)(!0),m=(0,r.Zp)();(0,s.useEffect)(()=>{t?h():o(!1)},[t]);const h=async()=>{try{const a=await n.H1.getCart(t._id);e({type:"SET_CART",payload:a.data})}catch(a){console.error("Error loading cart:",a)}finally{o(!1)}},u=async(a,s)=>{if(s<1)p(a);else try{const r=await n.H1.updateQuantity(t._id,{productId:a,quantity:s});e({type:"SET_CART",payload:r.data})}catch(i){var r,c;alert((null===(r=i.response)||void 0===r||null===(c=r.data)||void 0===c?void 0:c.message)||"Error updating quantity")}},p=async a=>{try{const s=await n.H1.removeItem(t._id,a);e({type:"SET_CART",payload:s.data})}catch(c){var s,r;alert((null===(s=c.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"Error removing item")}};return t?d?(0,l.jsx)("div",{className:"loading",children:"Loading cart..."}):(0,l.jsx)("div",{className:"cart-page",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsxs)("div",{className:"cart-header",children:[(0,l.jsx)("h1",{children:"Shopping Cart"}),a.items.length>0&&(0,l.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to clear your cart?"))try{await n.H1.clearCart(t._id),e({type:"CLEAR_CART"})}catch(r){var a,s;alert((null===(a=r.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Error clearing cart")}},className:"btn btn-danger",children:"Clear Cart"})]}),0===a.items.length?(0,l.jsxs)("div",{className:"empty-cart",children:[(0,l.jsx)("p",{children:"Your cart is empty"}),(0,l.jsx)(c.N_,{to:"/products",className:"btn btn-primary",children:"Continue Shopping"})]}):(0,l.jsxs)("div",{className:"cart-content",children:[(0,l.jsx)("div",{className:"cart-items",children:a.items.map(a=>a.product&&a.product._id?(0,l.jsxs)("div",{className:"cart-item",children:[(0,l.jsx)("div",{className:"item-image",children:(0,l.jsx)("img",{src:a.product.image||"https://via.placeholder.com/150x150?text=No+Image",alt:a.product.name||"Product",onError:a=>{a.target.src="https://via.placeholder.com/150x150?text=No+Image"}})}),(0,l.jsxs)("div",{className:"item-details",children:[(0,l.jsx)("h3",{children:a.product.name||"Unknown Product"}),(0,l.jsx)("p",{children:a.product.description||"No description available"}),(0,l.jsxs)("div",{className:"item-price",children:["\u20b9",a.price||0]})]}),(0,l.jsxs)("div",{className:"item-quantity",children:[(0,l.jsx)("button",{onClick:()=>u(a.product._id,a.quantity-1),className:"quantity-btn",children:"-"}),(0,l.jsx)("span",{className:"quantity",children:a.quantity}),(0,l.jsx)("button",{onClick:()=>u(a.product._id,a.quantity+1),className:"quantity-btn",children:"+"})]}),(0,l.jsxs)("div",{className:"item-total",children:["\u20b9",((a.price||0)*a.quantity).toFixed(2)]}),(0,l.jsx)("button",{onClick:()=>p(a.product._id),className:"remove-btn",children:"\xd7"})]},a.product._id):(console.warn("Cart item missing product data:",a),null)).filter(Boolean)}),(0,l.jsx)("div",{className:"cart-summary",children:(0,l.jsxs)("div",{className:"card",children:[(0,l.jsx)("div",{className:"card-header",children:(0,l.jsx)("h3",{children:"Order Summary"})}),(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsxs)("div",{className:"summary-row",children:[(0,l.jsx)("span",{children:"Subtotal:"}),(0,l.jsxs)("span",{children:["\u20b9",a.totalAmount.toFixed(2)]})]}),(0,l.jsxs)("div",{className:"summary-row",children:[(0,l.jsx)("span",{children:"Shipping:"}),(0,l.jsx)("span",{children:"\u20b950.00"})]}),(0,l.jsxs)("div",{className:"summary-row",children:[(0,l.jsx)("span",{children:"Tax (18% GST):"}),(0,l.jsxs)("span",{children:["\u20b9",(.18*a.totalAmount).toFixed(2)]})]}),(0,l.jsx)("hr",{}),(0,l.jsxs)("div",{className:"summary-row total",children:[(0,l.jsx)("span",{children:"Total:"}),(0,l.jsxs)("span",{children:["\u20b9",(a.totalAmount+50+.18*a.totalAmount).toFixed(2)]})]}),(0,l.jsx)("button",{onClick:()=>{m("/checkout")},className:"btn btn-primary checkout-btn",children:"Proceed to Checkout"})]})]})})]})]})}):(0,l.jsx)("div",{className:"cart-page",children:(0,l.jsx)("div",{className:"container",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h2",{children:"Please login to view your cart"}),(0,l.jsx)(c.N_,{to:"/login",className:"btn btn-primary",children:"Login"})]})})})}}}]);