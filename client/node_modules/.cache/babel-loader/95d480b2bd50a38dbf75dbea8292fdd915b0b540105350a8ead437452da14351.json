{"ast":null,"code":"import _objectSpread from\"C:/Users/kshit/Desktop/SD Assignment/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();const cartReducer=(state,action)=>{switch(action.type){case'SET_CART':return _objectSpread(_objectSpread({},state),{},{items:action.payload.items||[],totalAmount:action.payload.totalAmount||0});case'ADD_TO_CART':const existingItemIndex=state.items.findIndex(item=>item.product._id===action.payload.product._id);if(existingItemIndex>=0){const updatedItems=[...state.items];updatedItems[existingItemIndex].quantity+=action.payload.quantity;return _objectSpread(_objectSpread({},state),{},{items:updatedItems,totalAmount:updatedItems.reduce((total,item)=>total+item.price*item.quantity,0)});}else{const newItems=[...state.items,action.payload];return _objectSpread(_objectSpread({},state),{},{items:newItems,totalAmount:newItems.reduce((total,item)=>total+item.price*item.quantity,0)});}case'UPDATE_QUANTITY':const updatedItems=state.items.map(item=>item.product._id===action.payload.productId?_objectSpread(_objectSpread({},item),{},{quantity:action.payload.quantity}):item);return _objectSpread(_objectSpread({},state),{},{items:updatedItems,totalAmount:updatedItems.reduce((total,item)=>total+item.price*item.quantity,0)});case'REMOVE_FROM_CART':const filteredItems=state.items.filter(item=>item.product._id!==action.payload.productId);return _objectSpread(_objectSpread({},state),{},{items:filteredItems,totalAmount:filteredItems.reduce((total,item)=>total+item.price*item.quantity,0)});case'CLEAR_CART':return _objectSpread(_objectSpread({},state),{},{items:[],totalAmount:0});default:return state;}};export const CartProvider=_ref=>{let{children}=_ref;const[cartState,dispatch]=useReducer(cartReducer,{items:[],totalAmount:0});const[user,setUser]=React.useState(()=>{const savedUser=localStorage.getItem('user');return savedUser?JSON.parse(savedUser):null;});useEffect(()=>{if(user){localStorage.setItem('user',JSON.stringify(user));}else{localStorage.removeItem('user');}},[user]);const value={cartState,dispatch,user,setUser};return/*#__PURE__*/_jsx(CartContext.Provider,{value:value,children:children});};export const useCart=()=>{const context=useContext(CartContext);if(!context){throw new Error('useCart must be used within a CartProvider');}return context;};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}