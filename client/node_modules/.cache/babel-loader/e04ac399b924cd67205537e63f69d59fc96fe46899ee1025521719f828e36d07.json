{"ast":null,"code":"import React,{useState,useEffect}from'react';import{toast}from'react-toastify';import'./DeliveryNotifications.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DeliveryNotifications=_ref=>{let{order,onClose}=_ref;const[currentStatus,setCurrentStatus]=useState('');const[notifications,setNotifications]=useState([]);const[currentTime,setCurrentTime]=useState(new Date());useEffect(()=>{if(order&&order.deliveryTracking){setNotifications(order.deliveryTracking);setCurrentStatus(order.status);// Show latest notification as toast\nconst latestTracking=order.deliveryTracking[order.deliveryTracking.length-1];if(latestTracking){toast.info(\"\\uD83D\\uDCE6 \".concat(latestTracking.message),{position:\"top-right\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true});}}},[order]);// Update current time every second for countdown\nuseEffect(()=>{const timeInterval=setInterval(()=>{setCurrentTime(new Date());},1000);return()=>clearInterval(timeInterval);},[]);const getStatusIcon=status=>{switch(status===null||status===void 0?void 0:status.toLowerCase()){case'assigned':return'ðŸ‘¨â€ðŸ’¼';case'confirmed':return'âœ…';case'preparing':return'ðŸ‘¨â€ðŸ³';case'out for delivery':return'ðŸš—';case'nearby':return'ðŸ“';case'delivered':return'ðŸŽ‰';default:return'ðŸ“¦';}};const getStatusColor=status=>{switch(status===null||status===void 0?void 0:status.toLowerCase()){case'assigned':return'#17a2b8';case'confirmed':return'#28a745';case'preparing':return'#fd7e14';case'out for delivery':return'#6f42c1';case'nearby':return'#dc3545';case'delivered':return'#28a745';default:return'#6c757d';}};const formatTime=timestamp=>{const date=new Date(timestamp);return date.toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:true});};const formatDate=timestamp=>{const date=new Date(timestamp);return date.toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'});};const formatTimeRemaining=deliveryTime=>{const now=new Date();const delivery=new Date(deliveryTime);const diffMs=delivery.getTime()-now.getTime();if(diffMs<=0){return\"Delivery time reached\";}const hours=Math.floor(diffMs/(1000*60*60));const minutes=Math.floor(diffMs%(1000*60*60)/(1000*60));const seconds=Math.floor(diffMs%(1000*60)/1000);if(hours>0){return\"\".concat(hours,\"h \").concat(minutes,\"m \").concat(seconds,\"s remaining\");}else if(minutes>0){return\"\".concat(minutes,\"m \").concat(seconds,\"s remaining\");}else{return\"\".concat(seconds,\"s remaining\");}};if(!order||!notifications.length)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"delivery-notifications-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-notifications-modal\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDE9A Delivery Updates\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:\"\\xD7\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"current-status\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"status-badge\",style:{backgroundColor:getStatusColor(currentStatus)},children:[getStatusIcon(currentStatus),\" \",currentStatus]})}),order.deliveryPersonName&&/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-executive-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDC68\\u200D\\uD83D\\uDCBC Delivery Executive\"}),/*#__PURE__*/_jsx(\"div\",{className:\"executive-details\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"executive-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"executive-avatar\",children:order.deliveryPersonName.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"executive-info\",children:[/*#__PURE__*/_jsx(\"h5\",{children:order.deliveryPersonName}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCDE \",order.deliveryPersonPhone]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDEF5 \",order.deliveryPersonVehicle]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rating\",children:['â­'.repeat(Math.floor(order.deliveryPersonRating||4.5)),/*#__PURE__*/_jsxs(\"span\",{children:[order.deliveryPersonRating||4.5,\"/5\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"executive-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"call-btn\",onClick:()=>window.open(\"tel:\".concat(order.deliveryPersonPhone)),children:\"\\uD83D\\uDCDE Call\"})})]})})]}),order.estimatedDeliveryTime&&/*#__PURE__*/_jsxs(\"div\",{className:\"estimated-delivery\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u23F0 Estimated Delivery\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"delivery-time\",children:[formatDate(order.estimatedDeliveryTime),\" at \",formatTime(order.estimatedDeliveryTime)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"time-remaining\",children:[\"\\uD83D\\uDD52 \",formatTimeRemaining(order.estimatedDeliveryTime)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tracking-timeline\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDCCB Order Timeline\"}),/*#__PURE__*/_jsx(\"div\",{className:\"timeline\",children:notifications.map((notification,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"timeline-marker\",style:{backgroundColor:getStatusColor(notification.status)},children:getStatusIcon(notification.status)}),/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"timeline-header\",children:[/*#__PURE__*/_jsx(\"h5\",{children:notification.status}),/*#__PURE__*/_jsx(\"span\",{className:\"timeline-time\",children:formatTime(notification.timestamp)})]}),/*#__PURE__*/_jsx(\"p\",{children:notification.message}),notification.deliveryPerson&&/*#__PURE__*/_jsx(\"div\",{className:\"timeline-person\",children:/*#__PURE__*/_jsxs(\"small\",{children:[notification.deliveryPerson.name,\" \\u2022 \",notification.deliveryPerson.phone,\" \\u2022 \",notification.deliveryPerson.vehicle]})})]})]},notification._id||index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"order-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn primary\",children:\"\\uD83D\\uDCCD Track Live Location\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn secondary\",children:\"\\uD83D\\uDCAC Chat with Delivery Partner\"})]})]})});};export default DeliveryNotifications;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}