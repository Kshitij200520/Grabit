{"ast":null,"code":"import React,{useState}from'react';import{useCart}from'../context/CartContext';import{cartAPI}from'../services/api';import{toast}from'react-toastify';import'./ProductCard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductCard=_ref=>{let{product}=_ref;const{user,dispatch}=useCart();const[loading,setLoading]=useState(false);const[imageError,setImageError]=useState(false);const handleAddToCart=async()=>{if(!user){toast.error('Please login to add items to cart');return;}setLoading(true);try{const response=await cartAPI.addToCart(user._id,{productId:product._id,quantity:1});dispatch({type:'SET_CART',payload:response.data});toast.success(\"\".concat(product.name,\" added to cart! \\uD83D\\uDED2\"));}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Error adding to cart');}finally{setLoading(false);}};const handleImageError=()=>{setImageError(true);};const formatPrice=price=>{return new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR',minimumFractionDigits:0}).format(price);};return/*#__PURE__*/_jsxs(\"div\",{className:\"product-card\",children:[product.featured&&/*#__PURE__*/_jsx(\"div\",{className:\"featured-badge\",children:\"\\u2B50 Featured\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-image\",children:[!imageError?/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.name,onError:handleImageError,loading:\"lazy\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"image-placeholder\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"placeholder-icon\",children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Image not available\"})]}),product.stock===0&&/*#__PURE__*/_jsx(\"div\",{className:\"out-of-stock-overlay\",children:\"Out of Stock\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"product-name\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"product-description\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-section\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"product-price\",children:formatPrice(product.price)}),/*#__PURE__*/_jsx(\"span\",{className:\"product-category\",children:product.category})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stock-section\",children:/*#__PURE__*/_jsx(\"span\",{className:\"product-stock \".concat(product.stock<=5?'low-stock':''),children:product.stock>0?product.stock<=5?\"Only \".concat(product.stock,\" left!\"):\"\".concat(product.stock,\" in stock\"):'Out of stock'})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary add-to-cart-btn \".concat(loading?'loading':''),onClick:handleAddToCart,disabled:product.stock===0||loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner\"}),\"Adding...\"]}):product.stock===0?'Out of Stock':'üõí Add to Cart'})]})]});};export default ProductCard;","map":{"version":3,"names":["React","useState","useCart","cartAPI","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductCard","_ref","product","user","dispatch","loading","setLoading","imageError","setImageError","handleAddToCart","error","response","addToCart","_id","productId","quantity","type","payload","data","success","concat","name","_error$response","_error$response$data","message","handleImageError","formatPrice","price","Intl","NumberFormat","style","currency","minimumFractionDigits","format","className","children","featured","src","image","alt","onError","stock","description","category","onClick","disabled"],"sources":["C:/Users/kshit/Desktop/SD Assignment/client/src/components/ProductCard.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useCart } from '../context/CartContext';\r\nimport { cartAPI } from '../services/api';\r\nimport { toast } from 'react-toastify';\r\nimport './ProductCard.css';\r\n\r\nconst ProductCard = ({ product }) => {\r\n  const { user, dispatch } = useCart();\r\n  const [loading, setLoading] = useState(false);\r\n  const [imageError, setImageError] = useState(false);\r\n\r\n  const handleAddToCart = async () => {\r\n    if (!user) {\r\n      toast.error('Please login to add items to cart');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const response = await cartAPI.addToCart(user._id, {\r\n        productId: product._id,\r\n        quantity: 1\r\n      });\r\n\r\n      dispatch({\r\n        type: 'SET_CART',\r\n        payload: response.data\r\n      });\r\n\r\n      toast.success(`${product.name} added to cart! üõí`);\r\n    } catch (error) {\r\n      toast.error(error.response?.data?.message || 'Error adding to cart');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleImageError = () => {\r\n    setImageError(true);\r\n  };\r\n\r\n  const formatPrice = (price) => {\r\n    return new Intl.NumberFormat('en-IN', {\r\n      style: 'currency',\r\n      currency: 'INR',\r\n      minimumFractionDigits: 0\r\n    }).format(price);\r\n  };\r\n\r\n  return (\r\n    <div className=\"product-card\">\r\n      {product.featured && <div className=\"featured-badge\">‚≠ê Featured</div>}\r\n      \r\n      <div className=\"product-image\">\r\n        {!imageError ? (\r\n          <img \r\n            src={product.image} \r\n            alt={product.name}\r\n            onError={handleImageError}\r\n            loading=\"lazy\"\r\n          />\r\n        ) : (\r\n          <div className=\"image-placeholder\">\r\n            <div className=\"placeholder-icon\">üì¶</div>\r\n            <span>Image not available</span>\r\n          </div>\r\n        )}\r\n        {product.stock === 0 && <div className=\"out-of-stock-overlay\">Out of Stock</div>}\r\n      </div>\r\n      \r\n      <div className=\"product-info\">\r\n        <h3 className=\"product-name\">{product.name}</h3>\r\n        <p className=\"product-description\">{product.description}</p>\r\n        <div className=\"product-details\">\r\n          <div className=\"price-section\">\r\n            <span className=\"product-price\">{formatPrice(product.price)}</span>\r\n            <span className=\"product-category\">{product.category}</span>\r\n          </div>\r\n          <div className=\"stock-section\">\r\n            <span className={`product-stock ${product.stock <= 5 ? 'low-stock' : ''}`}>\r\n              {product.stock > 0 ? (\r\n                product.stock <= 5 ? `Only ${product.stock} left!` : `${product.stock} in stock`\r\n              ) : 'Out of stock'}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        \r\n        <button \r\n          className={`btn btn-primary add-to-cart-btn ${loading ? 'loading' : ''}`}\r\n          onClick={handleAddToCart}\r\n          disabled={product.stock === 0 || loading}\r\n        >\r\n          {loading ? (\r\n            <>\r\n              <span className=\"spinner\"></span>\r\n              Adding...\r\n            </>\r\n          ) : product.stock === 0 ? (\r\n            'Out of Stock'\r\n          ) : (\r\n            'üõí Add to Cart'\r\n          )}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}