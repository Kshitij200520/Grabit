{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kshit\\\\Desktop\\\\SD Assignment\\\\client\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nconst cartReducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_CART':\n      return {\n        ...state,\n        items: action.payload.items || [],\n        totalAmount: action.payload.totalAmount || 0\n      };\n    case 'ADD_TO_CART':\n      const existingItemIndex = state.items.findIndex(item => item.product._id === action.payload.product._id);\n      if (existingItemIndex >= 0) {\n        const updatedItems = [...state.items];\n        updatedItems[existingItemIndex].quantity += action.payload.quantity;\n        return {\n          ...state,\n          items: updatedItems,\n          totalAmount: updatedItems.reduce((total, item) => total + item.price * item.quantity, 0)\n        };\n      } else {\n        const newItems = [...state.items, action.payload];\n        return {\n          ...state,\n          items: newItems,\n          totalAmount: newItems.reduce((total, item) => total + item.price * item.quantity, 0)\n        };\n      }\n    case 'UPDATE_QUANTITY':\n      const updatedItems = state.items.map(item => item.product._id === action.payload.productId ? {\n        ...item,\n        quantity: action.payload.quantity\n      } : item);\n      return {\n        ...state,\n        items: updatedItems,\n        totalAmount: updatedItems.reduce((total, item) => total + item.price * item.quantity, 0)\n      };\n    case 'REMOVE_FROM_CART':\n      const filteredItems = state.items.filter(item => item.product._id !== action.payload.productId);\n      return {\n        ...state,\n        items: filteredItems,\n        totalAmount: filteredItems.reduce((total, item) => total + item.price * item.quantity, 0)\n      };\n    case 'CLEAR_CART':\n      return {\n        ...state,\n        items: [],\n        totalAmount: 0\n      };\n    default:\n      return state;\n  }\n};\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [cartState, dispatch] = useReducer(cartReducer, {\n    items: [],\n    totalAmount: 0\n  });\n  const [user, setUser] = React.useState(() => {\n    const savedUser = localStorage.getItem('user');\n    return savedUser ? JSON.parse(savedUser) : null;\n  });\n  useEffect(() => {\n    if (user) {\n      localStorage.setItem('user', JSON.stringify(user));\n    } else {\n      localStorage.removeItem('user');\n    }\n  }, [user]);\n  const value = {\n    cartState,\n    dispatch,\n    user,\n    setUser\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"DUclEPihMq9XeKAqIYBL/ym4ycE=\");\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n};\n_s2(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}