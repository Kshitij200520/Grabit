{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kshit\\\\Desktop\\\\SD Assignment\\\\client\\\\src\\\\pages\\\\Products.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { productAPI } from '../services/api';\nimport ProductCard from '../components/ProductCard';\nimport './Products.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Products = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [search, setSearch] = useState('');\n  const [category, setCategory] = useState('');\n  const [categories, setCategories] = useState([]);\n  useEffect(() => {\n    loadProducts();\n  }, [search, category]);\n  const loadProducts = async () => {\n    try {\n      setLoading(true);\n      const params = {};\n      if (search) params.search = search;\n      if (category) params.category = category;\n\n      // Retry logic for better reliability\n      let retries = 3;\n      while (retries > 0) {\n        try {\n          const response = await productAPI.getAll(params);\n          setProducts(response.data);\n\n          // Extract unique categories\n          const uniqueCategories = [...new Set(response.data.map(p => p.category))];\n          setCategories(uniqueCategories);\n          break;\n        } catch (error) {\n          retries--;\n          if (retries === 0) throw error;\n          await new Promise(resolve => setTimeout(resolve, 500)); // Wait 500ms before retry\n        }\n      }\n    } catch (error) {\n      console.error('Error loading products:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSearchChange = e => {\n    setSearch(e.target.value);\n  };\n  const handleCategoryChange = e => {\n    setCategory(e.target.value);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"products-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"products-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filters\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-box\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Search products...\",\n              value: search,\n              onChange: handleSearchChange,\n              className: \"form-control\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"category-filter\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              value: category,\n              onChange: handleCategoryChange,\n              className: \"form-control\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"All Categories\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 17\n              }, this), categories.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: cat,\n                children: cat\n              }, cat, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading\",\n        children: \"Loading products...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"products-grid\",\n        children: [products.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n          product: product\n        }, product._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }, this)), products.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-products\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No products found.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(Products, \"yngqFuXJ60yGwa09o6aYd2T5wDs=\");\n_c = Products;\nexport default Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["React","useState","useEffect","productAPI","ProductCard","jsxDEV","_jsxDEV","Products","_s","products","setProducts","loading","setLoading","search","setSearch","category","setCategory","categories","setCategories","loadProducts","params","retries","response","getAll","data","uniqueCategories","Set","map","p","error","Promise","resolve","setTimeout","console","handleSearchChange","e","target","value","handleCategoryChange","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","cat","product","_id","length","_c","$RefreshReg$"],"sources":["C:/Users/kshit/Desktop/SD Assignment/client/src/pages/Products.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { productAPI } from '../services/api';\r\nimport ProductCard from '../components/ProductCard';\r\nimport './Products.css';\r\n\r\nconst Products = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState('');\r\n  const [category, setCategory] = useState('');\r\n  const [categories, setCategories] = useState([]);\r\n\r\n  useEffect(() => {\r\n    loadProducts();\r\n  }, [search, category]);\r\n\r\n  const loadProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const params = {};\r\n      if (search) params.search = search;\r\n      if (category) params.category = category;\r\n      \r\n      // Retry logic for better reliability\r\n      let retries = 3;\r\n      while (retries > 0) {\r\n        try {\r\n          const response = await productAPI.getAll(params);\r\n          setProducts(response.data);\r\n          \r\n          // Extract unique categories\r\n          const uniqueCategories = [...new Set(response.data.map(p => p.category))];\r\n          setCategories(uniqueCategories);\r\n          break;\r\n        } catch (error) {\r\n          retries--;\r\n          if (retries === 0) throw error;\r\n          await new Promise(resolve => setTimeout(resolve, 500)); // Wait 500ms before retry\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading products:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearchChange = (e) => {\r\n    setSearch(e.target.value);\r\n  };\r\n\r\n  const handleCategoryChange = (e) => {\r\n    setCategory(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div className=\"products-page\">\r\n      <div className=\"container\">\r\n        <div className=\"products-header\">\r\n          <h1>Products</h1>\r\n          \r\n          <div className=\"filters\">\r\n            <div className=\"search-box\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search products...\"\r\n                value={search}\r\n                onChange={handleSearchChange}\r\n                className=\"form-control\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"category-filter\">\r\n              <select\r\n                value={category}\r\n                onChange={handleCategoryChange}\r\n                className=\"form-control\"\r\n              >\r\n                <option value=\"\">All Categories</option>\r\n                {categories.map(cat => (\r\n                  <option key={cat} value={cat}>{cat}</option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"loading\">Loading products...</div>\r\n        ) : (\r\n          <div className=\"products-grid\">\r\n            {products.map(product => (\r\n              <ProductCard key={product._id} product={product} />\r\n            ))}\r\n            {products.length === 0 && (\r\n              <div className=\"no-products\">\r\n                <p>No products found.</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}