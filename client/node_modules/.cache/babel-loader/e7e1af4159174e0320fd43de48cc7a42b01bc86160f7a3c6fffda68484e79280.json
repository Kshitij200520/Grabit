{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kshit\\\\Desktop\\\\SD Assignment\\\\client\\\\src\\\\components\\\\ProductCard.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useCart } from '../context/CartContext';\nimport { cartAPI } from '../services/api';\nimport { toast } from 'react-toastify';\nimport './ProductCard.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProductCard = ({\n  product\n}) => {\n  _s();\n  const {\n    user,\n    dispatch\n  } = useCart();\n  const [loading, setLoading] = useState(false);\n  const [imageError, setImageError] = useState(false);\n  const handleAddToCart = async () => {\n    if (!user) {\n      toast.error('Please login to add items to cart');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await cartAPI.addToCart(user._id, {\n        productId: product._id,\n        quantity: 1\n      });\n      dispatch({\n        type: 'SET_CART',\n        payload: response.data\n      });\n      toast.success(`${product.name} added to cart! ðŸ›’`);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Error adding to cart');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleImageError = () => {\n    setImageError(true);\n  };\n  const formatPrice = price => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n      minimumFractionDigits: 0\n    }).format(price);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-card\",\n    children: [product.featured && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"featured-badge\",\n      children: \"\\u2B50 Featured\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-image\",\n      children: [!imageError ? /*#__PURE__*/_jsxDEV(\"img\", {\n        src: product.image,\n        alt: product.name,\n        onError: handleImageError,\n        loading: \"lazy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-placeholder\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"placeholder-icon\",\n          children: \"\\uD83D\\uDCE6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Image not available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), product.stock === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"out-of-stock-overlay\",\n        children: \"Out of Stock\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 33\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"product-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"product-name\",\n        children: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"product-description\",\n        children: product.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"price-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"product-price\",\n            children: formatPrice(product.price)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"product-category\",\n            children: product.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stock-section\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `product-stock ${product.stock <= 5 ? 'low-stock' : ''}`,\n            children: product.stock > 0 ? product.stock <= 5 ? `Only ${product.stock} left!` : `${product.stock} in stock` : 'Out of stock'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `btn btn-primary add-to-cart-btn ${loading ? 'loading' : ''}`,\n        onClick: handleAddToCart,\n        disabled: product.stock === 0 || loading,\n        children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this), \"Adding...\"]\n        }, void 0, true) : product.stock === 0 ? 'Out of Stock' : 'ðŸ›’ Add to Cart'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductCard, \"rfuJEBnoLfiaCarQZo205UlN6Dw=\", false, function () {\n  return [useCart];\n});\n_c = ProductCard;\nexport default ProductCard;\nvar _c;\n$RefreshReg$(_c, \"ProductCard\");","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}